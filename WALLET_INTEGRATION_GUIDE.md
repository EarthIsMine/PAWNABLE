# ğŸ”— PAWNABLE ì§€ê°‘ ì—°ê²° ê°€ì´ë“œ

PAWNABLEì´ ì‹¤ì œ ë¸”ë¡ì²´ì¸ê³¼ ì—°ê²°ë˜ì–´ ë™ì‘í•˜ëŠ” ì™„ì „í•œ P2P NFT ë‹´ë³´ ëŒ€ì¶œ ì„œë¹„ìŠ¤ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤!

## ğŸ“‹ ëª©ì°¨

1. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
2. [ë¡œì»¬ í™˜ê²½ ì„¤ì •](#-ë¡œì»¬-í™˜ê²½-ì„¤ì •)
3. [ì§€ê°‘ ì—°ê²° ë°©ë²•](#-ì§€ê°‘-ì—°ê²°-ë°©ë²•)
4. [í…ŒìŠ¤íŠ¸ ë°©ë²•](#-í…ŒìŠ¤íŠ¸-ë°©ë²•)
5. [ì‹¤ì œ ì„œë¹„ìŠ¤ ë°°í¬](#-ì‹¤ì œ-ì„œë¹„ìŠ¤-ë°°í¬)

---

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PAWNABLE Platform                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   í”„ë¡ íŠ¸ì—”ë“œ    â”‚    â”‚   ë°±ì—”ë“œ API    â”‚    â”‚   ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸  â”‚
â”‚   (Next.js)     â”‚â—„â”€â”€â–ºâ”‚   (Express)     â”‚    â”‚   (Solidity)      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                   â”‚
â”‚  â€¢ MetaMask     â”‚    â”‚  â€¢ ì§€ê°‘ ì¸ì¦    â”‚    â”‚  â€¢ PawnableLoan   â”‚
â”‚  â€¢ ethers.js    â”‚    â”‚  â€¢ JWT í† í°     â”‚    â”‚  â€¢ MockUSDT       â”‚
â”‚  â€¢ ì»¨íŠ¸ë™íŠ¸     â”‚    â”‚  â€¢ ë°ì´í„° CRUD  â”‚    â”‚  â€¢ PawnableNFT    â”‚
â”‚    í˜¸ì¶œ         â”‚    â”‚  â€¢ TX ë¡œê·¸      â”‚    â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚                        â–²
         â”‚                      â”‚                        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   PostgreSQL DB      â”‚
                    â”‚                      â”‚
                    â”‚  â€¢ users             â”‚
                    â”‚  â€¢ loans             â”‚
                    â”‚  â€¢ collaterals       â”‚
                    â”‚  â€¢ onchain_tx_logs   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ ë¡œì»¬ í™˜ê²½ ì„¤ì •

### 1. Hardhat ë¡œì»¬ ë…¸ë“œ ì‹¤í–‰

Hardhatì€ ë¡œì»¬ ì´ë”ë¦¬ì›€ ë„¤íŠ¸ì›Œí¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

```bash
cd blockchain
pnpm hardhat node
```

ì‹¤í–‰ë˜ë©´ 20ê°œì˜ í…ŒìŠ¤íŠ¸ ê³„ì •ê³¼ ê°ê° 10,000 ETHê°€ ì œê³µë©ë‹ˆë‹¤:

```
Account #0: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 (10000 ETH) - Deployer
Account #1: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 (10000 ETH) - Test User 1
Account #2: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC (10000 ETH) - Test User 2
...
```

### 2. ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ë°°í¬

ìƒˆ í„°ë¯¸ë„ì„ ì—´ê³ :

```bash
cd blockchain
pnpm hardhat run scripts/deploy.ts --network localhost
```

ë°°í¬ í›„ ì¶œë ¥ë˜ëŠ” ì£¼ì†Œë“¤:

```
MockUSDT       : 0x959922bE3CAee4b8Cd9a407cc3ac1C251C2007B1
PawnableNFT    : 0x9A9f2CCfdE556A7E9Ff0848998Aa4a0CFD8863AE
PawnableLoan   : 0x68B1D87F95878fE05B998F19b66F4baba5De1aed
```

**âœ… ì´ë¯¸ ì™„ë£Œë¨** - í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ì— ìë™ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!

### 3. í…ŒìŠ¤íŠ¸ ìì‚° ì¤€ë¹„

```bash
cd blockchain
pnpm hardhat run scripts/setup-test-wallet.ts --network localhost
```

ê²°ê³¼:
- Test User 1: NFT 3ê°œ + USDT 1,000ê°œ (Borrower)
- Test User 2: USDT 1,000ê°œ (Lender)

### 4. ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰

```bash
cd backend
pnpm dev
```

ì„œë²„: `http://localhost:8085`

### 5. í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰

```bash
cd frontend
pnpm dev
```

ì•±: `http://localhost:3000`

---

## ğŸ” ì§€ê°‘ ì—°ê²° ë°©ë²•

### MetaMask ì„¤ì •

#### 1. MetaMask ì„¤ì¹˜

- [Chrome Extension](https://metamask.io/download/)
- ë¸Œë¼ìš°ì €ì— MetaMask í™•ì¥ í”„ë¡œê·¸ë¨ ì„¤ì¹˜

#### 2. Hardhat ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ ì¶”ê°€

MetaMask ì„¤ì • > ë„¤íŠ¸ì›Œí¬ > ë„¤íŠ¸ì›Œí¬ ì¶”ê°€:

```
ë„¤íŠ¸ì›Œí¬ ì´ë¦„: Hardhat Local
RPC URL: http://127.0.0.1:8545
ì²´ì¸ ID: 1337
í†µí™” ê¸°í˜¸: ETH
```

#### 3. í…ŒìŠ¤íŠ¸ ê³„ì • ê°€ì ¸ì˜¤ê¸°

Hardhat ë…¸ë“œ ì‹œì‘ ì‹œ í‘œì‹œëœ Private Keyë¥¼ ì‚¬ìš©:

**Test User 1 (Borrower - NFT ì†Œìœ ì):**
```
Private Key: 0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d
ì£¼ì†Œ: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
```

**Test User 2 (Lender - USDT ì†Œìœ ì):**
```
Private Key: 0x5de4111afa1a4b94908f83103eb1f1706367c2e68ca870fc3fb9a804cdab365a
ì£¼ì†Œ: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC
```

MetaMaskì—ì„œ:
1. ê³„ì • ì•„ì´ì½˜ í´ë¦­
2. "ê³„ì • ê°€ì ¸ì˜¤ê¸°" ì„ íƒ
3. Private Key ì…ë ¥
4. ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### ì‹œë‚˜ë¦¬ì˜¤ 1: ëŒ€ì¶œ ìš”ì²­ (Borrower)

1. **MetaMaskì—ì„œ Test User 1ë¡œ ì „í™˜**
2. **PAWNABLE ì•±ì—ì„œ "ì§€ê°‘ ì—°ê²°" í´ë¦­**
   - MetaMask íŒì—…ì—ì„œ ìŠ¹ì¸
   - ì„œëª… ìš”ì²­ ìŠ¹ì¸ (ê°€ìŠ¤ë¹„ 0)
   - ìë™ìœ¼ë¡œ ë¡œê·¸ì¸ë¨

3. **"ëŒ€ì¶œ ìƒì„±" í˜ì´ì§€ë¡œ ì´ë™**
4. **ëŒ€ì¶œ ì •ë³´ ì…ë ¥:**
   - NFT ì»¨íŠ¸ë™íŠ¸: `0x9A9f2CCfdE556A7E9Ff0848998Aa4a0CFD8863AE`
   - Token ID: `0` (ë˜ëŠ” `1`, `2`)
   - ëŒ€ì¶œ ê¸ˆì•¡: `100` USDT
   - ì´ììœ¨: `500` (5%)
   - ëŒ€ì¶œ ê¸°ê°„: `7` days

5. **"NFT ìŠ¹ì¸" í´ë¦­**
   - MetaMask íŠ¸ëœì­ì…˜ ìŠ¹ì¸
   - NFTê°€ ì»¨íŠ¸ë™íŠ¸ì— ë‹´ë³´ë¡œ ì˜ˆì¹˜ë¨

6. **"ëŒ€ì¶œ ìš”ì²­" í´ë¦­**
   - MetaMask íŠ¸ëœì­ì…˜ ìŠ¹ì¸
   - ëŒ€ì¶œì´ ë§ˆì¼“í”Œë ˆì´ìŠ¤ì— ë“±ë¡ë¨

### ì‹œë‚˜ë¦¬ì˜¤ 2: ëŒ€ì¶œ ë§¤ì¹­ (Lender)

1. **MetaMaskì—ì„œ Test User 2ë¡œ ì „í™˜**
2. **PAWNABLE ì•± ìƒˆë¡œê³ ì¹¨ í›„ "ì§€ê°‘ ì—°ê²°"**
3. **"ë§ˆì¼“í”Œë ˆì´ìŠ¤" í˜ì´ì§€ë¡œ ì´ë™**
4. **ë“±ë¡ëœ ëŒ€ì¶œ í™•ì¸**
5. **"USDT ìŠ¹ì¸" í´ë¦­**
   - ëŒ€ì¶œ ê¸ˆì•¡ë§Œí¼ USDT ì§€ì¶œ ìŠ¹ì¸
6. **"ëŒ€ì¶œ ë§¤ì¹­" í´ë¦­**
   - USDTê°€ Borrowerì—ê²Œ ì „ì†¡ë¨
   - NFTê°€ Escrowë¡œ ì´ë™ë¨
   - ëŒ€ì¶œ ìƒíƒœ: ACTIVE

### ì‹œë‚˜ë¦¬ì˜¤ 3: ëŒ€ì¶œ ìƒí™˜ (Borrower)

1. **MetaMaskì—ì„œ Test User 1ë¡œ ì „í™˜**
2. **"ë‚´ ëŒ€ì¶œ" í˜ì´ì§€ì—ì„œ ACTIVE ëŒ€ì¶œ í™•ì¸**
3. **"ìƒí™˜" í´ë¦­**
   - ì›ê¸ˆ + ì´ì + í”Œë«í¼ ìˆ˜ìˆ˜ë£Œ ì§€ë¶ˆ
   - NFTê°€ Borrowerì—ê²Œ ë°˜í™˜ë¨
   - ëŒ€ì¶œ ìƒíƒœ: REPAID

### ì‹œë‚˜ë¦¬ì˜¤ 4: ëŒ€ì¶œ ì²­ì‚° (Lender)

1. **ê¸°í•œì´ ì§€ë‚œ ëŒ€ì¶œì´ ìˆì„ ê²½ìš°**
2. **MetaMaskì—ì„œ Lenderë¡œ ì „í™˜**
3. **"ì²­ì‚°" í´ë¦­**
   - NFTê°€ Lenderì—ê²Œ ì´ì „ë¨
   - ëŒ€ì¶œ ìƒíƒœ: LIQUIDATED

---

## ğŸ“Š ì£¼ìš” ê¸°ëŠ¥

### í”„ë¡ íŠ¸ì—”ë“œ ì»¨íŠ¸ë™íŠ¸ ì„œë¹„ìŠ¤

íŒŒì¼: `frontend/src/lib/contracts.ts`

```typescript
import { contractService } from "@/lib/contracts"

// ì´ˆê¸°í™” (ì§€ê°‘ ì—°ê²° ì‹œ ìë™)
await contractService.initialize()

// USDT ì”ì•¡ í™•ì¸
const balance = await contractService.getUSDTBalance(address)

// USDT ìŠ¹ì¸
await contractService.approveUSDT("100")

// NFT ìŠ¹ì¸
await contractService.approveNFT(tokenId)

// ëŒ€ì¶œ ìš”ì²­
const { txHash, loanId } = await contractService.requestLoan(
  nftContract,
  tokenId,
  "100", // USDT
  500,   // 5%
  7 * 24 * 3600 // 7 days
)

// ëŒ€ì¶œ ë§¤ì¹­
await contractService.matchLoan(loanId)

// ëŒ€ì¶œ ìƒí™˜
await contractService.repayLoan(loanId)

// ëŒ€ì¶œ ì²­ì‚°
await contractService.liquidateLoan(loanId)
```

### React Hook ì‚¬ìš©

íŒŒì¼: `frontend/src/hooks/use-contract.ts`

```typescript
import { useContract } from "@/hooks/use-contract"

function MyComponent() {
  const {
    isInitialized,
    isLoading,
    requestLoan,
    matchLoan,
    repayLoan,
    getAllLoans,
  } = useContract()

  // ì‚¬ìš© ì˜ˆì‹œ
  const handleRequestLoan = async () => {
    try {
      const result = await requestLoan(
        nftContract,
        tokenId,
        amount,
        interestRate,
        duration
      )
      console.log("Loan created:", result.loanId)
    } catch (error) {
      console.error(error)
    }
  }
}
```

---

## ğŸŒ ì‹¤ì œ ì„œë¹„ìŠ¤ ë°°í¬

### í…ŒìŠ¤íŠ¸ë„· ë°°í¬ (Sepolia)

#### 1. í™˜ê²½ ì„¤ì •

`blockchain/.env` íŒŒì¼ ìƒì„±:

```env
SEPOLIA_RPC_URL=https://sepolia.infura.io/v3/YOUR_INFURA_KEY
PRIVATE_KEY=your_deployer_private_key
ETHERSCAN_API_KEY=your_etherscan_api_key
```

#### 2. Hardhat ì„¤ì • ì—…ë°ì´íŠ¸

`blockchain/hardhat.config.ts`:

```typescript
import * as dotenv from "dotenv"
dotenv.config()

const config: HardhatUserConfig = {
  // ... ê¸°ì¡´ ì„¤ì •
  networks: {
    sepolia: {
      url: process.env.SEPOLIA_RPC_URL || "",
      accounts: process.env.PRIVATE_KEY ? [process.env.PRIVATE_KEY] : [],
    },
  },
  etherscan: {
    apiKey: process.env.ETHERSCAN_API_KEY,
  },
}
```

#### 3. ë°°í¬

```bash
cd blockchain
pnpm hardhat run scripts/deploy.ts --network sepolia
```

#### 4. ê²€ì¦

```bash
pnpm hardhat verify --network sepolia DEPLOYED_CONTRACT_ADDRESS
```

#### 5. í™˜ê²½ ë³€ìˆ˜ ì—…ë°ì´íŠ¸

ë°°í¬ëœ ì£¼ì†Œë¡œ `.env` íŒŒì¼ ì—…ë°ì´íŠ¸:

```env
# backend/.env
BLOCKCHAIN_RPC_URL=https://sepolia.infura.io/v3/YOUR_INFURA_KEY
LOAN_CONTRACT_ADDRESS=0x...
USDT_CONTRACT_ADDRESS=0x...
NFT_CONTRACT_ADDRESS=0x...

# frontend/.env.local
NEXT_PUBLIC_CHAIN_ID=11155111
NEXT_PUBLIC_RPC_URL=https://sepolia.infura.io/v3/YOUR_INFURA_KEY
NEXT_PUBLIC_LOAN_CONTRACT=0x...
NEXT_PUBLIC_USDT_CONTRACT=0x...
NEXT_PUBLIC_NFT_CONTRACT=0x...
```

---

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### MetaMask ì—°ê²° ì•ˆë¨

**ë¬¸ì œ:** "MetaMask is not installed" ì—ëŸ¬

**í•´ê²°:**
1. MetaMask í™•ì¥ í”„ë¡œê·¸ë¨ ì„¤ì¹˜ í™•ì¸
2. ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨
3. MetaMask ì ê¸ˆ í•´ì œ í™•ì¸

### íŠ¸ëœì­ì…˜ ì‹¤íŒ¨

**ë¬¸ì œ:** "Transaction reverted" ì—ëŸ¬

**í•´ê²°:**
1. USDT/NFT ìŠ¹ì¸ ë¨¼ì € ì™„ë£Œí–ˆëŠ”ì§€ í™•ì¸
2. ì¶©ë¶„í•œ ì”ì•¡ì´ ìˆëŠ”ì§€ í™•ì¸
3. ì˜¬ë°”ë¥¸ ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸ (chainId: 1337)

### ë„¤íŠ¸ì›Œí¬ ë¶ˆì¼ì¹˜

**ë¬¸ì œ:** "Please switch to network with chainId 1337"

**í•´ê²°:**
1. MetaMaskì—ì„œ "Hardhat Local" ë„¤íŠ¸ì›Œí¬ ì„ íƒ
2. ë˜ëŠ” ìë™ ë„¤íŠ¸ì›Œí¬ ì „í™˜ ìŠ¹ì¸

### Hardhat ë…¸ë“œ ì¬ì‹œì‘ í›„ ì£¼ì†Œ ë³€ê²½

**ë¬¸ì œ:** ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œê°€ ë³€ê²½ë¨

**í•´ê²°:**
```bash
# 1. ì»¨íŠ¸ë™íŠ¸ ì¬ë°°í¬
cd blockchain
pnpm hardhat run scripts/deploy.ts --network localhost

# 2. í…ŒìŠ¤íŠ¸ ìì‚° ì¬ì„¤ì •
pnpm hardhat run scripts/setup-test-wallet.ts --network localhost

# 3. í”„ë¡ íŠ¸ì—”ë“œ/ë°±ì—”ë“œ ì¬ì‹œì‘
```

---

## ğŸ“ˆ ë‹¤ìŒ ë‹¨ê³„

### ì¶”ê°€ ê¸°ëŠ¥ êµ¬í˜„

1. **í† í° ê°€ê²© ì˜¤ë¼í´ í†µí•©**
   - Chainlink Price Feeds
   - ì‹¤ì‹œê°„ ë‹´ë³´ ê°€ì¹˜ í‰ê°€

2. **ë¶€ë¶„ ìƒí™˜ ê¸°ëŠ¥**
   - ì›ê¸ˆì˜ ì¼ë¶€ë§Œ ìƒí™˜ ê°€ëŠ¥

3. **ìë™ ì²­ì‚° ë´‡**
   - ê¸°í•œ ë§Œë£Œ ì‹œ ìë™ ì²­ì‚°

4. **ì•Œë¦¼ ì‹œìŠ¤í…œ**
   - ìƒí™˜ ê¸°í•œ ì•Œë¦¼
   - ì²­ì‚° ìœ„í—˜ ì•Œë¦¼

### ë³´ì•ˆ ê°•í™”

1. **ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ê°ì‚¬**
   - OpenZeppelin Defender
   - ì „ë¬¸ ê°ì‚¬ ì—…ì²´ ì˜ë¢°

2. **Rate Limiting**
   - API ìš”ì²­ ì œí•œ
   - DDoS ë°©ì–´

3. **Multi-sig ì§€ê°‘**
   - í”Œë«í¼ ìˆ˜ìˆ˜ë£Œ ê´€ë¦¬
   - ê¸´ê¸‰ ì¤‘ë‹¨ ê¸°ëŠ¥

---

## ğŸ‰ ì™„ë£Œ!

ì´ì œ PAWNABLEì€ ì‹¤ì œ ë¸”ë¡ì²´ì¸ê³¼ ì—°ë™ëœ ì™„ì „í•œ P2P NFT ë‹´ë³´ ëŒ€ì¶œ í”Œë«í¼ì…ë‹ˆë‹¤!

- âœ… MetaMask ì§€ê°‘ ì—°ê²°
- âœ… ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ìƒí˜¸ì‘ìš©
- âœ… NFT ë‹´ë³´ ì˜ˆì¹˜
- âœ… USDT ëŒ€ì¶œ/ìƒí™˜
- âœ… ì™„ì „ íƒˆì¤‘ì•™í™” ëŒ€ì¶œ í”„ë¡œì„¸ìŠ¤

**ì§ˆë¬¸ì´ë‚˜ ë¬¸ì œê°€ ìˆìœ¼ë©´ GitHub Issuesë¥¼ í†µí•´ ë¬¸ì˜í•´ì£¼ì„¸ìš”!**
